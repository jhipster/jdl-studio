{"version":3,"sources":["resources/interaction-tutorial.png","resources/logo-jhipster.svg","resources/Samples.ts","components/studio/StudioReducer.ts","components/JhOnlineReducer.ts","Store.ts","components/sidebar/Reference.tsx","components/sidebar/About.tsx","components/sidebar/Sidebar.tsx","components/Popups.tsx","components/Utils.ts","components/Header.tsx","codemirror/JDLHint.ts","codemirror/CodemirrorJDLMode.ts","components/studio/JDLToNoml.ts","components/studio/CanvasPanner.ts","components/studio/CanvasTools.tsx","components/studio/Studio.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["module","exports","defaultSource","JDLtemplates","key","val","ACTION_TYPES","DEF_ERROR","lineMarkerTop","hasError","errorTooltip","STORAGE_KEY","THEME_KEY","storage","buildStorage","location","hash","rankers","directions","initialState","loading","code","read","error","isStorageReadOnly","isReadonly","isCanvasMode","sidebarVisible","isLightMode","localStorage","sidebarId","ranker","direction","setCode","data","save","type","setStorageStat","urlDecode","encoded","decodeURIComponent","replace","locationHash","substring","source","moveToLocalStorage","txt","findNextIndex","lastIndex","insideJhOnline","window","href","indexOf","authenticated","username","jdlId","jdls","startLoadingFlag","rootReducer","combineReducers","studio","state","action","jhOnline","store","createStore","Reference","className","target","rel","About","src","interactionTutorial","alt","connect","id","WarningPopup","open","modal","closeOnDocumentClick","close","onClick","ResetPopup","closeModal","discard","onClose","UploadPopup","useState","file","setFiles","accept","onChange","evt","files","f","setCurrentText","match","name","endsWith","r","FileReader","onload","e","contents","result","console","log","size","readAsText","alert","ga","importJDL","goToJHipsterOnline","goToManageJdls","downloadImage","url","document","getElementById","toDataURL","currentTarget","saveAs","event","keyCode","metaKey","ctrlKey","navigator","platform","preventDefault","click","setFilename","filename","fileBtn","download","imgBtn","mapDispatchToProps","setJDL","setSidebar","toggleLightMode","toggleRanker","toggleDirection","uploadPopup","setUploadPopup","templatePopup","setTemplatePopup","template","setTemplate","toggleSidebar","page","title","logo","ng-show","value","map","it","jdl","content","textFileAsBlob","Blob","URL","webkitURL","createObjectURL","downloadFile","filter","WORD","CodeMirror","registerHelper","editor","options","word","range","cur","getCursor","curLine","getLine","line","end","ch","start","test","charAt","curWord","slice","list","seen","re","RegExp","dir","endLine","Math","min","max","firstLine","lastLine","text","m","exec","lastIndexOf","Object","prototype","hasOwnProperty","call","push","forEach","item","toLowerCase","startsWith","from","Pos","to","mainKeywords","relationshipKws","appInnerKws","validationKws","generalKws","paginationKws","dtoKws","serviceKws","searchKws","apptypeKws","typeKws","appKeysKws","deploymentKeysKws","specialValueKws","defineMode","words","define","style","i","length","tokenBase","stream","eatSpace","sol","next","delimiters","split","skipToEnd","lastCh","string","startCh","trim","eat","eatWhile","some","c","current","peek","eol","tokenize","tokens","concat","startState","token","lineComment","fold","keywords","commands","autocomplete","cm","showHint","hint","anyword","NomlEntityTypes","CanvasPanner","element","throttle","offset","x","y","zoomLevel","superSampling","devicePixelRatio","mouseDownPoint","mouseUp","width","addEventListener","nomnoml","skanaar","vector","diff","pageX","pageY","deltaY","passive","viewport","w","this","h","height","top","innerHeight","left","innerWidth","exp","validJDL","isDirective","jdlToNoml","jdlString","lines","s","index","pureDirectives","join","pureDiagramCode","JDL","parse","nomlEntities","allEntityNames","entities","unProcessedEntities","applications","app","appLabel","config","baseName","applicationType","processEntities","included","excluded","msOptions","appName","include","includes","entries","findActualEntities","entityList","microservice","children","unProcessed","package","renderType","description","clientFramework","authenticationType","prodDatabaseType","processed","nomlText","mapToNoml","out","allEnumNames","enums","enumsInApp","entity","body","field","relation","validations","en","enum","values","relationships","getCardinality","cardinality","CanvasTools","classToggler","panner","onMouseEnter","onMouseLeave","magnify","reset","NOMNOML_STYLE","Studio","cmOptions","lineNumbers","mode","matchBrackets","autoCloseBrackets","keyMap","extraKeys","editorRef","React","createRef","canvasRef","canvasPannerRef","getDefaultDirectives","renderJDL","props","canvas","nomlVal","finalVal","model","draw","zoom","positionCanvas","handleError","updateCode","setDefaultError","msg","message","parseFloat","getComputedStyle","getWrapperElement","getPropertyValue","findLine","setError","parseInt","setCanvasMode","getClassNames","editorBeforeChange","editorOnChange","reloadStorage","leading","prevProps","removeEventListener","ref","onBeforeChange","theme","PureComponent","dispatch","App","Boolean","hostname","ReactDOM","render","StrictMode","serviceWorker","ready","then","registration","unregister","catch"],"mappings":"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","file":"static/js/main.40061f29.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,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\"","module.exports = __webpack_public_path__ + \"static/media/logo-jhipster.335cc5d4.svg\";","export const defaultSource = `\nentity Region {\n\tregionName String\n}\n\nentity Country {\n\tcountryName String\n}\n\n// an ignored comment\n/** not an ignored comment */\nentity Location {\n\tstreetAddress String,\n\tpostalCode String,\n\tcity String,\n\tstateProvince String\n}\n\nentity Department {\n\tdepartmentName String required\n}\n\n/**\n * Task entity.\n * @author The JHipster team.\n */\nentity Task {\n\ttitle String,\n\tdescription String\n}\n\n/**\n * The Employee entity.\n */\nentity Employee {\n\t/**\n\t* The firstname attribute.\n\t*/\n\tfirstName String,\n\tlastName String,\n\temail String,\n\tphoneNumber String,\n\thireDate Instant,\n\tsalary Long,\n\tcommissionPct Long\n}\n\nentity Job {\n\tjobTitle String,\n\tminSalary Long,\n\tmaxSalary Long\n}\n\nentity JobHistory {\n\tstartDate Instant,\n\tendDate Instant,\n\tlanguage Language\n}\n\nenum Language {\n    FRENCH, ENGLISH, SPANISH\n}\n\nrelationship OneToOne {\n\tCountry{region} to Region\n}\n\nrelationship OneToOne {\n\tLocation{country} to Country\n}\n\nrelationship OneToOne {\n\tDepartment{location} to Location\n}\n\nrelationship ManyToMany {\n\tJob{task(title)} to Task{job}\n}\n\n// defining multiple OneToMany relationships with comments\nrelationship OneToMany {\n\tEmployee to Job{employee},\n\t/**\n\t* A relationship\n\t*/\n\tDepartment to\n\t/**\n\t* Another side of the same relationship\n\t*/\n\tEmployee{department}\n}\n\nrelationship ManyToOne {\n\tEmployee{manager} to Employee\n}\n\n// defining multiple oneToOne relationships\nrelationship OneToOne {\n\tJobHistory{job} to Job,\n\tJobHistory{department} to Department,\n\tJobHistory{employee} to Employee\n}\n\n// Set pagination options\npaginate JobHistory, Employee with infinite-scroll\npaginate Job with pagination\n\n// Use Data Transfer Objects (DTO)\n// dto * with mapstruct\n\n// Set service options to all except few\nservice all with serviceImpl except Employee, Job\n\n// Set an angular suffix\n// angularSuffix * with mySuffix\n`;\n\nexport const JDLtemplates = [\n  {\n    key: \"default sample\",\n    val: defaultSource,\n  },\n  {\n    key: \"simple monolith\",\n    val: `\napplication {\n  config {\n    baseName myApp,\n    applicationType monolith,\n    packageName com.myapp,\n    authenticationType jwt,\n    prodDatabaseType mysql,\n    clientFramework angular\n  }\n  entities *\n}\n\nentity A {}\n\nentity B {}\n\nrelationship OneToMany {\n  Foo to Bar\n}\n    `,\n  },\n  {\n    key: \"simple microservice\",\n    val: `\napplication {\n  config {\n    baseName myApp,\n    applicationType gateway,\n    packageName com.myapp,\n    authenticationType jwt,\n    prodDatabaseType mysql,\n    clientFramework react\n  }\n  entities *\n}\n\napplication {\n  config {\n    baseName myApp1,\n    applicationType microservice,\n    packageName com.myapp,\n    authenticationType jwt,\n    prodDatabaseType mysql,\n  }\n  entities A, B\n}\n\napplication {\n  config {\n    baseName myApp2,\n    applicationType microservice,\n    packageName com.myapp,\n    authenticationType jwt,\n    prodDatabaseType mysql,\n  }\n  entities C\n}\n\nentity A {}\n\nentity B {}\n\nentity C {}\n\nentity D {}\n\nrelationship OneToMany {\n  A to B\n}\n    `,\n  },\n];\n","// sample JDL\nimport { defaultSource } from \"../../resources/Samples\";\n\nexport const ACTION_TYPES = {\n  SET_CODE: \"studio/SET_CODE\",\n  SET_ERROR: \"studio/SET_ERROR\",\n  SET_STORAGE_STAT: \"studio/SET_STORAGE_STAT\",\n  SET_CANVAS_MODE: \"studio/SET_CANVAS_MODE\",\n  SET_SIDEBAR: \"studio/SET_SIDEBAR\",\n  TOGGLE_THEME: \"studio/TOGGLE_THEME\",\n  TOGGLE_RANKER: \"studio/TOGGLE_RANKER\",\n  TOGGLE_DIRECTION: \"studio/TOGGLE_DIRECTION\",\n};\n\nconst DEF_ERROR = {\n  lineMarkerTop: -35,\n  hasError: false,\n  errorTooltip: \"\",\n};\nconst STORAGE_KEY = \"jdlstudio.lastSource\";\nconst THEME_KEY = \"jdlstudio.lightMode\";\n// this object stores the JDL code to local storage\nlet storage = buildStorage(location.hash, defaultSource); // eslint-disable-line no-restricted-globals\n\nconst rankers = [\"tight-tree\", \"longest-path\"];\nconst directions = [\"down\", \"right\"];\n\nconst initialState = {\n  loading: false,\n  code: storage.read(),\n  error: DEF_ERROR,\n  isStorageReadOnly: storage.isReadonly,\n  isCanvasMode: false,\n  sidebarVisible: false,\n  isLightMode: localStorage[THEME_KEY] === \"true\" ? true : false,\n  sidebarId: \"\",\n  ranker: rankers[0],\n  direction: directions[0],\n};\n\nexport type StudioState = Readonly<typeof initialState>;\n\nexport const studio = (\n  state: StudioState = initialState,\n  action\n): StudioState => {\n  switch (action.type) {\n    case ACTION_TYPES.SET_CODE:\n      return {\n        ...state,\n        code: action.data,\n      };\n    case ACTION_TYPES.SET_ERROR:\n      return {\n        ...state,\n        error: action.data,\n      };\n    case ACTION_TYPES.SET_STORAGE_STAT:\n      return {\n        ...state,\n        isStorageReadOnly: action.data,\n      };\n    case ACTION_TYPES.SET_CANVAS_MODE:\n      return {\n        ...state,\n        isCanvasMode: action.data,\n      };\n    case ACTION_TYPES.TOGGLE_RANKER:\n      return {\n        ...state,\n        ranker: rankers[findNextIndex(rankers.indexOf(state.ranker))],\n      };\n    case ACTION_TYPES.TOGGLE_DIRECTION:\n      return {\n        ...state,\n        direction:\n          directions[findNextIndex(directions.indexOf(state.direction))],\n      };\n    case ACTION_TYPES.TOGGLE_THEME:\n      localStorage[THEME_KEY] = !state.isLightMode;\n      return {\n        ...state,\n        isLightMode: !state.isLightMode,\n      };\n    case ACTION_TYPES.SET_SIDEBAR:\n      return {\n        ...state,\n        sidebarVisible: !state.sidebarId || state.sidebarId !== action.data,\n        sidebarId: state.sidebarId !== action.data ? action.data : \"\",\n      };\n    default:\n      return state;\n  }\n};\n\nexport const reloadStorage: () => void = () => (dispatch) => {\n  storage = buildStorage(location.hash); // eslint-disable-line no-restricted-globals\n  dispatch(setCode(storage.read()));\n  dispatch(setStorageStat(storage.isReadonly));\n};\n\nexport const setCode = (data) => {\n  storage.save(data);\n  return {\n    type: ACTION_TYPES.SET_CODE,\n    data,\n  };\n};\n\nexport const setError = (data) => ({\n  type: ACTION_TYPES.SET_ERROR,\n  data,\n});\n\nexport const setDefaultError = () => ({\n  type: ACTION_TYPES.SET_ERROR,\n  data: DEF_ERROR,\n});\n\nexport const setCanvasMode = (data) => ({\n  type: ACTION_TYPES.SET_CANVAS_MODE,\n  data,\n});\n\nexport const toggleLightMode = () => ({\n  type: ACTION_TYPES.TOGGLE_THEME,\n});\n\nexport const toggleRanker = () => ({\n  type: ACTION_TYPES.TOGGLE_RANKER,\n});\n\nexport const toggleDirection = () => ({\n  type: ACTION_TYPES.TOGGLE_DIRECTION,\n});\n\nexport const setSidebar = (data) => ({\n  type: ACTION_TYPES.SET_SIDEBAR,\n  data,\n});\n\nexport const setStorageStat = (data) => ({\n  type: ACTION_TYPES.SET_STORAGE_STAT,\n  data,\n});\n\nfunction urlDecode(encoded) {\n  return decodeURIComponent(encoded.replace(/\\+/g, \" \"));\n}\n\nfunction buildStorage(locationHash, defaultSource = \"\") {\n  if (locationHash.substring(0, 7) === \"#/view/\") {\n    return {\n      read: function (): string {\n        return urlDecode(locationHash.substring(7));\n      },\n      save: function (source: string) {},\n      moveToLocalStorage: function (txt: string) {\n        localStorage[STORAGE_KEY] = txt;\n      },\n      isReadonly: true,\n    };\n  }\n  return {\n    read: function (): string {\n      return localStorage[STORAGE_KEY] || defaultSource;\n    },\n    save: function (source: string) {\n      localStorage[STORAGE_KEY] = source;\n    },\n    moveToLocalStorage: function (txt) {},\n    isReadonly: false,\n  };\n}\n\nfunction findNextIndex(lastIndex) {\n  return lastIndex === 0 ? 1 : 0;\n}\n","import { setCode } from \"./studio/StudioReducer\";\n\nexport const ACTION_TYPES = {\n  SET_JDL: \"jhOnline/SET_JDL\",\n  SET_AUTH: \"jhOnline/SET_AUTH\",\n  SET_JDL_META: \"jhOnline/SET_JDL_META\",\n};\n\nconst initialState = {\n  insideJhOnline: isInJHOnline(),\n  authenticated: false,\n  username: \"\",\n  jdlId: \"\",\n  jdls: [] as {\n    name: string;\n    id: string;\n  }[],\n  startLoadingFlag: false,\n};\n\nconst server_api = \"/\";\n\nexport type JhOnlineState = Readonly<typeof initialState>;\n\nexport const jhOnline = (\n  state: JhOnlineState = initialState,\n  action\n): JhOnlineState => {\n  switch (action.type) {\n    case ACTION_TYPES.SET_AUTH:\n      return {\n        ...state,\n        ...action.data,\n      };\n    case ACTION_TYPES.SET_JDL:\n      return {\n        ...state,\n        jdlId: action.data,\n      };\n    case ACTION_TYPES.SET_JDL_META:\n      return {\n        ...state,\n        jdls: action.data,\n      };\n    default:\n      return state;\n  }\n};\n\nexport const setJDL = (data) => ({\n  type: ACTION_TYPES.SET_JDL,\n  data,\n});\n\nexport const loadJdl = () => async (dispatch, getState) => {\n  const state = getState() as JhOnlineState;\n  try {\n    const res = await fetch(`${server_api}/api/jdl/${state.jdlId}`);\n    const json = await res.json();\n    var content = \"\";\n    if (json.content !== undefined) {\n      content = json.content;\n    }\n    dispatch(setCode(content));\n    setViewHash(state.jdlId);\n  } catch (e) {\n    console.error(e);\n    dispatch(fetchAllJDLsMetadata());\n    dispatch({\n      type: ACTION_TYPES.SET_JDL,\n      data: \"\",\n    });\n    setViewHash(\"\");\n  }\n};\n\nexport const fetchAllJDLsMetadata = () => async (dispatch, getState) => {\n  try {\n    const res = await fetch(`${server_api}/api/jdl-metadata`);\n    const json = await res.json();\n    dispatch({\n      type: ACTION_TYPES.SET_JDL_META,\n      data: json,\n    });\n    var viewHash = getViewHash();\n    if (viewHash === \"\") {\n      return;\n    }\n    for (var index = 0; index < json.length; ++index) {\n      if (viewHash === json[index].id) {\n        dispatch({\n          type: ACTION_TYPES.SET_JDL,\n          data: viewHash,\n        });\n      }\n    }\n  } catch (e) {\n    console.error(e);\n  }\n};\n\nexport const initAuthentication = () => async (dispatch, getState) => {\n  var authToken = JSON.parse(\n    localStorage.getItem(\"jhi-authenticationtoken\") ||\n      sessionStorage.getItem(\"jhi-authenticationtoken\") ||\n      \"\"\n  );\n  if (authToken) {\n    try {\n      const res = await fetch(`${server_api}/api/account`, {\n        headers: {\n          Authorization: `Bearer ${authToken}`,\n        },\n      });\n      const json = await res.json();\n      dispatch({\n        type: ACTION_TYPES.SET_AUTH,\n        data: {\n          authenticated: true,\n          username: json.login,\n        },\n      });\n      const jdlId = getViewHash();\n      if (jdlId !== \"\") {\n        dispatch({\n          type: ACTION_TYPES.SET_JDL,\n          data: jdlId,\n        });\n        dispatch(loadJdl());\n      }\n      dispatch(fetchAllJDLsMetadata());\n    } catch (e) {\n      console.error(e);\n      dispatch({\n        type: ACTION_TYPES.SET_AUTH,\n        data: {\n          authenticated: false,\n          username: \"\",\n        },\n      });\n    }\n  }\n};\n\nfunction getViewHash() {\n  const hash = location.hash; // eslint-disable-line no-restricted-globals\n  if (!hash) {\n    return \"\";\n  }\n  return hash.substring(8, hash.length);\n}\n\nfunction setViewHash(jdlId) {\n  // TODO this doesn't seem to work\n  location.hash = \"/view/\" + jdlId; // eslint-disable-line no-restricted-globals\n}\n\nfunction isInJHOnline() {\n  return window.location.href.indexOf(\"www.jhipster.tech/jdl-studio\") === -1;\n}\n","import { createStore } from \"redux\";\nimport { combineReducers } from \"redux\";\nimport { studio, StudioState } from \"./components/studio/StudioReducer\";\nimport { jhOnline, JhOnlineState } from \"./components/JhOnlineReducer\";\n\nexport interface IRootState {\n  readonly studio: StudioState;\n  readonly jhOnline: JhOnlineState;\n}\n\nexport const rootReducer = combineReducers<IRootState>({\n  studio,\n  jhOnline,\n});\n\nexport const store = createStore(rootReducer);\n","import React from \"react\";\n\nexport const Reference = () => (\n  <>\n    <div className=\"content\">\n      <h3>JDL Reference</h3>\n      <h2>Application Declaration</h2>\n      <hr />\n      <div className=\"highlighter-rouge\">\n        <code className=\"highlight\">\n          <pre>\n            application &#123; <br />\n            &nbsp;&nbsp;config &#123; <br />\n            &nbsp;&nbsp;&nbsp;&nbsp;&lt;option name&gt; &lt;option value&gt;\n            <br />\n            &nbsp;&nbsp;&#125;\n            <br />\n            &nbsp;&nbsp;[entities &lt;application entity list&gt;]\n            <br />\n            &nbsp;&nbsp;[&lt;options&gt;]\n            <br />\n            &#125;\n            <br />\n          </pre>\n        </code>\n      </div>\n      <ul className=\"options\">\n        <li>\n          <p>\n            Application configuration keys/values are specified under config\n            (which must be inside application)\n          </p>\n        </li>\n        <li>\n          <p>\n            There can be 0, 1 or any application option as you want (provided\n            they are valid)\n          </p>\n        </li>\n        <li>\n          <p>\n            Entities that will be generated inside the application are listed\n            via entities, this is the recommended way to generate entities in\n            applications.\n          </p>\n        </li>\n        <li>\n          <p>\n            The <kbd>entities</kbd> keyword is optional: you can omit it, but\n            every entity in the JDL file will be generated inside the\n            application\n          </p>\n        </li>\n      </ul>\n      <p>\n        Full documentation with possible options can be found{\" \"}\n        <a\n          href=\"https://www.jhipster.tech/jdl/applications\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          here\n        </a>\n      </p>\n      <h2>Entity Declaration</h2>\n      <hr />\n      <div className=\"highlighter-rouge\">\n        <code className=\"highlight\">\n          <pre>\n            entity &lt;entity name&gt; &#123; <br />\n            &nbsp;&nbsp;&lt;field name&gt; &lt;type&gt;[&lt;validation&gt;*]{\" \"}\n            <br />\n            &#125;\n          </pre>\n        </code>\n      </div>\n      <ul className=\"options\">\n        <li>\n          <p>\n            <code className=\"highlighter-rouge\">&lt;entity name&gt;</code> is\n            the name of the entity,\n          </p>\n        </li>\n        <li>\n          <p>\n            <code className=\"highlighter-rouge\">&lt;field name&gt;</code> the\n            name of one field of the entity,\n          </p>\n        </li>\n        <li>\n          <p>\n            <code className=\"highlighter-rouge\">&lt;type&gt;</code> the JHipster\n            supported type of the field,\n          </p>\n        </li>\n        <li>\n          <p>\n            and as an option{\" \"}\n            <code className=\"highlighter-rouge\">&lt;validation&gt;</code> the\n            validations for the field.\n          </p>\n        </li>\n      </ul>\n      <p>\n        Full documentation with possible options can be found here{\" \"}\n        <a\n          href=\"https://www.jhipster.tech/jdl/entities-fields\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          here\n        </a>\n      </p>\n      <p>\n        The possible types and validations are those described{\" \"}\n        <a\n          href=\"https://www.jhipster.tech/jdl/entities-fields#field-types-and-validations\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          here\n        </a>\n        , if the validation requires a value, simply add{\" \"}\n        <code className=\"highlighter-rouge\">(&lt;value&gt;)</code> right after\n        the name of the validation.\n      </p>\n      <h2>Enum Declaration</h2>\n      <hr />\n      <div className=\"highlighter-rouge\">\n        <code className=\"highlight\">\n          <pre>\n            enum &lt;enum name&gt; &#123; <br />\n            &nbsp;&nbsp;&lt;enum values&gt; <br />\n            &#125;\n          </pre>\n        </code>\n      </div>\n      <ul className=\"options\">\n        <li>\n          <p>\n            <code className=\"highlighter-rouge\">&lt;enum name&gt;</code> is the\n            name of the enum,\n          </p>\n        </li>\n        <li>\n          <p>\n            <code className=\"highlighter-rouge\">&lt;enum values&gt;</code> the\n            comma separated values in uppercase\n          </p>\n        </li>\n      </ul>\n      <p>\n        Full documentation with possible options can be found here{\" \"}\n        <a\n          href=\"https://www.jhipster.tech/jdl/enums\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          here\n        </a>\n      </p>\n      <h2>Relationship Declaration</h2>\n      <hr />\n      <div className=\"highlighter-rouge\">\n        <pre className=\"highlight\">\n          relationship &lt;type&gt; &#123;\n          <br />\n          &nbsp;&nbsp;&lt;from entity&gt;[&#123;&lt;relationship name&gt;&#125;]\n          <br />\n          &nbsp;&nbsp;to\n          <br />\n          &nbsp;&nbsp;&lt;to entity&gt;[&#123;&lt;relationship name&gt;&#125;]\n          <br />\n          &#125;\n        </pre>\n      </div>\n      <ul className=\"options\">\n        <li>\n          <p>\n            <code className=\"highlighter-rouge\">&lt;type&gt;</code> is the type\n            of your relationship (OneToMany | ManyToOne | OneToOne | ManyToMany)\n          </p>\n        </li>\n        <li>\n          <p>\n            <code className=\"highlighter-rouge\">&lt;from entity&gt;</code> is\n            the name of the entity owner of the relationship,\n          </p>\n        </li>\n        <li>\n          <p>\n            <code className=\"highlighter-rouge\">&lt;to entity&gt;</code> is the\n            name of the entity where the relationship goes to,\n          </p>\n        </li>\n        <li>\n          <p>\n            <code className=\"highlighter-rouge\">&lt;relationship name&gt;</code>{\" \"}\n            is the name of the relationship in the entity.\n          </p>\n        </li>\n      </ul>\n      <p>\n        Full documentation with possible options can be found here{\" \"}\n        <a\n          href=\"https://www.jhipster.tech/jdl/relationships\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          here\n        </a>\n      </p>\n      <h2>Option Declaration</h2>\n      <hr />\n      <p>\n        It is possible to declare some of the supported options via JDL,\n        supported options are:\n      </p>\n      <ul className=\"options\">\n        <li>\n          <p>\n            <code className=\"highlighter-rouge\">paginate</code> enable\n            pagination for the entity with pager | pagination | infinite-scroll\n          </p>\n        </li>\n        <li>\n          <p>\n            <code className=\"highlighter-rouge\">service</code> enable service\n            layer for the entity with serviceClass | serviceImpl\n          </p>\n        </li>\n        <li>\n          <p>\n            <code className=\"highlighter-rouge\">dto</code> enable DTO for the\n            entity with Mapstruct\n          </p>\n        </li>\n        <li>\n          <p>\n            <code className=\"highlighter-rouge\">skipClient</code> skip client\n            side code for entity\n          </p>\n        </li>\n        <li>\n          <p>\n            <code className=\"highlighter-rouge\">skipServer</code> skip server\n            side code for entity\n          </p>\n        </li>\n        <li>\n          <p>\n            <code className=\"highlighter-rouge\">angularSuffix</code> add a\n            suffix to angular route names\n          </p>\n        </li>\n        <li>\n          <p>\n            <code className=\"highlighter-rouge\">microservice</code> specify the\n            app name of entity from another microservice\n          </p>\n        </li>\n        <li>\n          <p>\n            <code className=\"highlighter-rouge\">search</code> specify search\n            option for entity from another microservice\n          </p>\n        </li>\n      </ul>\n      <p>\n        Full documentation with possible options can be found here{\" \"}\n        <a\n          href=\"https://www.jhipster.tech/jdl/options\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          here\n        </a>\n      </p>\n      <p>\n        Refer{\" \"}\n        <a\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          href=\"http://www.jhipster.tech/jdl/\"\n        >\n          JDL\n        </a>{\" \"}\n        documentation for more details.\n      </p>\n    </div>\n  </>\n);\n","import React from \"react\";\nimport interactionTutorial from \"../../resources/interaction-tutorial.png\";\n\nexport const About = () => (\n  <>\n    <div className=\"content\">\n      <h3>About</h3>\n      <p>\n        Hello, this is JDL-Studio, a tool for drawing{\" \"}\n        <a\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          href=\"http://www.jhipster.tech/\"\n        >\n          JHipster\n        </a>{\" \"}\n        JDL diagrams based on the{\" \"}\n        <a\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          href=\"http://www.jhipster.tech//jdl\"\n        >\n          JDL syntax\n        </a>\n        .{\" \"}\n      </p>\n      <p>\n        Try and edit the code on the left and watch the diagram change. Any\n        changes are saved to the browser's <i>localStorage</i>, so your diagram\n        should be here the next time, (but no guarantees). If you want\n        persistent storage, sign in with your JHipster Online account to save\n        the JDL.\n      </p>\n      <p>\n        Created by{\" \"}\n        <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://deepu.tech\">\n          Deepu KS\n        </a>{\" \"}\n        and hosted on{\" \"}\n        <a\n          href=\"https://github.com/jhipster/jdl-studio\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          GitHub\n        </a>.\n      </p>\n      <p>\n        JDL-Studio was made possible by the cool project{\" \"}\n        <a\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          href=\"https://github.com/skanaar/nomnoml\"\n        >\n          nomnoml\n        </a>{\" \"}\n        by{\" \"}\n        <a\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          href=\"https://github.com/skanaar\"\n        >\n          Daniel Kallin\n        </a>{\" \"}\n        .\n      </p>\n      <h2>Interaction</h2>\n      <hr />\n      <p>\n        The canvas can be panned and zoomed by dragging and scrolling in the\n        right hand third of the canvas.\n      </p>\n      <img\n        className=\"invert\"\n        src={interactionTutorial}\n        alt=\"interaction tutorial\"\n      />\n      <p>\n        Downloaded image files will be given the filename in the{\" \"}\n        <kbd>#title</kbd> directive.\n      </p>\n      <p>\n        The editor supports a subset of <i>Sublime Text's</i>{\" \"}\n        <a\n          href=\"https://codemirror.net/demo/sublime.html\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          keymappings\n        </a>\n        . Hit <code>Ctrl-Space</code> for auto suggestions.\n      </p>\n      <h2>Examples</h2>\n      <hr />\n      <p>\n        Refer{\" \"}\n        <a\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          href=\"http://www.jhipster.tech/jdl\"\n        >\n          JDL\n        </a>{\" \"}\n        documentation for examples.\n      </p>\n      <h2>Usage</h2>\n      <hr />\n      <p>\n        Refer{\" \"}\n        <a\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          href=\"http://www.jhipster.tech/jdl\"\n        >\n          JDL\n        </a>{\" \"}\n        documentation for more details.\n      </p>\n      <label>Set font</label>\n      <code>#font: Times</code>\n      <label>Layout the diagram really tight</label>\n      <code>#fontSize: 8</code><br />\n      <code>#spacing: 12</code><br />\n      <code>#padding: 3</code>\n      <h2>Directives</h2>\n      <hr />\n      <p>\n        The rendered image style can be customized by setting these directives\n        along with the JDL code. There should not be any empty space before a\n        directive.\n      </p>\n      <code>#arrowSize: 1</code><br />\n      <code>#bendSize: 0.3</code><br />\n      <code>#direction: down | right</code><br />\n      <code>#gutter: 5</code><br />\n      <code>#edgeMargin: 0</code><br />\n      <code>#edges: hard | rounded</code><br />\n      <code>#background: transparent</code><br />\n      <code>#fill: #eee8d5; #fdf6e3</code><br />\n      <code>#fillArrows: false</code><br />\n      <code>#font: Calibri</code><br />\n      <code>#fontSize: 12</code><br />\n      <code>#leading: 1.25</code><br />\n      <code>#lineWidth: 3</code><br />\n      <code>#padding: 8</code><br />\n      <code>#spacing: 40</code><br />\n      <code>#stroke: #33322E</code><br />\n      <code>#title: filename</code><br />\n      <code>#zoom: 1</code><br />\n      <code>#acyclicer: greedy</code><br />\n      <code>#ranker: network-simplex | tight-tree | longest-path</code><br />\n    </div>\n  </>\n);\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { IRootState } from \"../../Store\";\nimport { Reference } from \"./Reference\";\nimport { About } from \"./About\";\n\nexport interface ISidebarProp extends StateProps {}\n\nexport function Sidebar({\n  sidebarId,\n  sidebarVisible,\n  isLightMode,\n}: ISidebarProp) {\n  return (\n    <div\n      id=\"sidebar\"\n      className={`sidebar ${sidebarVisible ? \"visible\" : \"\"} ${\n        isLightMode ? \"light-theme\" : \"dark-theme\"\n      }`}\n    >\n      {sidebarId === \"reference\" ? <Reference /> : <About />}\n    </div>\n  );\n}\n\nconst mapStateToProps = ({ studio }: IRootState) => ({\n  sidebarId: studio.sidebarId,\n  sidebarVisible: studio.sidebarVisible,\n  isLightMode: studio.isLightMode,\n});\n\ntype StateProps = ReturnType<typeof mapStateToProps>;\n\nexport default connect(mapStateToProps, null)(Sidebar);\n","import React, { useState } from \"react\";\nimport Popup from \"reactjs-popup\";\nimport \"reactjs-popup/dist/index.css\";\n\nexport const WarningPopup = ({ open, className = \"\" }) => (\n  <Popup open={open} modal closeOnDocumentClick={true} className={className}>\n    {(close) => (\n      <div className={`${className} modal`}>\n        <div className=\"header\">Warning!</div>\n        <div className=\"content\">\n          <p>\n            You are using an experimental beta version of JDL Studio. Please use\n            the stable version at{\" \"}\n            <a href=\"https://start.jhipster.tech/jdl-studio/\">\n              https://start.jhipster.tech/jdl-studio/\n            </a>{\" \"}\n            for more features and persistent storage\n          </p>\n        </div>\n        <div className=\"actions\">\n          <button className=\"button\" onClick={close}>\n            It's OK\n          </button>\n        </div>\n      </div>\n    )}\n  </Popup>\n);\n\nexport const ResetPopup = ({ open, closeModal, discard, className = \"\" }) => {\n  const ok = () => {\n    closeModal();\n    discard();\n  };\n  return (\n    <Popup\n      open={open}\n      modal\n      closeOnDocumentClick={false}\n      onClose={closeModal}\n      className={className}\n    >\n      <div className={`${className} modal`}>\n        <div className=\"header\">Discard</div>\n        <div className=\"content\">\n          <p>\n            Do you want to discard current diagram and load the sample? This\n            will overwrite local storage as well\n          </p>\n        </div>\n        <div className=\"actions\">\n          <button className=\"button\" onClick={ok}>\n            Yes\n          </button>\n          <button className=\"button\" onClick={closeModal}>\n            No\n          </button>\n        </div>\n      </div>\n    </Popup>\n  );\n};\n\nexport const UploadPopup = ({ open, closeModal, setCode, className = \"\" }) => {\n  const [file, setFiles] = useState(null);\n\n  const setJDlFile = (evt) => {\n    setFiles(evt.target.files[0]);\n  };\n\n  const importFile = () => {\n    closeModal();\n    importJDL(file, setCode);\n  };\n\n  return (\n    <Popup\n      open={open}\n      modal\n      closeOnDocumentClick={false}\n      onClose={closeModal}\n      className={className}\n    >\n      <div className={`${className} modal`}>\n        <div className=\"header\">Import JDL</div>\n        <div className=\"content\">\n          <p>\n            Select a <code>.jh</code> or <code>.jdl</code> file\n          </p>\n          <input\n            className=\"upload\"\n            accept=\".jh,.jdl\"\n            type=\"file\"\n            id=\"jdlFileInput\"\n            onChange={setJDlFile}\n          />\n        </div>\n        <div className=\"actions\">\n          <button className=\"button\" onClick={importFile}>\n            Import\n          </button>\n          <button className=\"button\" onClick={closeModal}>\n            Dismiss\n          </button>\n        </div>\n      </div>\n    </Popup>\n  );\n};\n\nfunction importJDL(f, setCurrentText) {\n  if (!f) {\n    alert(\"Failed to load file\");\n  } else if (\n    !f.type.match(\"text.*\") &&\n    !(f.name.endsWith(\".jh\") || f.name.endsWith(\".jdl\"))\n  ) {\n    alert(f.name + \" is not a valid JDL or text file.\");\n  } else {\n    var r = new FileReader();\n    r.onload = function (e) {\n      if (e && e.target) {\n        var contents = e.target.result as string;\n        console.log(\n          `Got the file name: ${f.name} type: ${f.type} size: ${f.size} bytes`\n        );\n        setCurrentText(contents);\n      }\n    };\n    r.readAsText(f);\n  }\n  ga(\"send\", \"event\", \"JDL File\", \"upload\", \"JDL File upload\");\n  ga(\"jdlTracker.send\", \"event\", \"JDL File\", \"upload\", \"JDL File upload\");\n}\n","export const goToJHipsterOnline = () => {\n  window.location.href = \"/\";\n};\nexport const goToManageJdls = () => {\n  window.location.href = \"/design-entities\";\n};\n\nexport const downloadImage = (evt) => {\n  const canvasElement = document.getElementById(\"canvas\") as HTMLCanvasElement;\n  var url = canvasElement.toDataURL(\"image/png\");\n  evt.currentTarget.href = url;\n  ga(\"send\", \"event\", \"JDL Image\", \"download\", \"JDL Image download\");\n  ga(\"jdlTracker.send\", \"event\", \"JDL Image\", \"download\", \"JDL Image download\");\n};\n\nexport const downloadFile = (evt, content) => {\n  var textFileAsBlob = new Blob([content], { type: \"text/plain\" });\n  var URL = window.URL || window.webkitURL;\n  if (URL !== null) {\n    evt.currentTarget.href = window.URL.createObjectURL(textFileAsBlob);\n  }\n  ga(\"send\", \"event\", \"JDL File\", \"download\", \"JDL File download\");\n  ga(\"jdlTracker.send\", \"event\", \"JDL File\", \"download\", \"JDL File download\");\n};\n\nexport const saveAs = (event) => {\n  const { keyCode, metaKey, ctrlKey } = event;\n  if (keyCode === 83 && (navigator.platform.match(\"Mac\") ? metaKey : ctrlKey)) {\n    event.preventDefault();\n    document.getElementById(\"saveTextbutton\")?.click();\n    return false;\n  }\n};\n\nexport const setFilename = (filename) => {\n  const fileBtn = document.getElementById(\n    \"saveTextbutton\"\n  ) as HTMLAnchorElement;\n  if (fileBtn) {\n    fileBtn.download = filename + \".jdl\";\n  }\n  const imgBtn = document.getElementById(\"savebutton\") as HTMLAnchorElement;\n  if (imgBtn) {\n    imgBtn.download = filename + \".png\";\n  }\n};\n","/* eslint-disable jsx-a11y/anchor-is-valid */\nimport React, { useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport LineIcon from \"react-lineicons\";\nimport logo from \"../resources/logo-jhipster.svg\";\nimport { IRootState } from \"../Store\";\nimport { setJDL } from \"./JhOnlineReducer\";\nimport {\n  setSidebar,\n  setCode,\n  toggleLightMode,\n  toggleRanker,\n  toggleDirection,\n} from \"./studio/StudioReducer\";\nimport { UploadPopup, ResetPopup, WarningPopup } from \"./Popups\";\nimport {\n  downloadFile,\n  goToJHipsterOnline,\n  goToManageJdls,\n  downloadImage,\n} from \"./Utils\";\nimport { JDLtemplates } from \"../resources/Samples\";\n\nexport interface IHeaderProp extends StateProps, DispatchProps {}\n\nexport function Header({\n  code,\n  isStorageReadOnly,\n  jhOnline,\n  isLightMode,\n  ranker,\n  direction,\n  setCode,\n  setJDL,\n  setSidebar,\n  toggleLightMode,\n  toggleRanker,\n  toggleDirection,\n}: IHeaderProp) {\n  const [uploadPopup, setUploadPopup] = useState(false);\n  const [templatePopup, setTemplatePopup] = useState(false);\n  const [template, setTemplate] = useState(\"\");\n\n  const toggleSidebar = (page: string) => () => {\n    setSidebar(page);\n  };\n\n  const openUploadDialog = () => {\n    setUploadPopup(true);\n  };\n\n  const closeUploadDialog = () => {\n    setUploadPopup(false);\n  };\n\n  const openTemplateDialog = (evt) => {\n    setTemplate(evt.target.value);\n    if (evt.target.value) {\n      setTemplatePopup(true);\n    }\n  };\n\n  const closeTemplateDialog = () => {\n    setTemplatePopup(false);\n  };\n\n  const loadTemplate = () => {\n    if (template) {\n      const code = JDLtemplates.filter((it) => it.key === template)[0].val;\n      setCode(code);\n    }\n  };\n\n  const downloadJDL = (evt) => {\n    downloadFile(evt, code);\n  };\n\n  const confirmCreateNewJdl = () => {};\n\n  return (\n    <>\n      <header className={`${isLightMode ? \"light-theme\" : \"dark-theme\"}`}>\n        <div className=\"tools left\">\n          <a\n            href=\"https://www.jhipster.tech/\"\n            title=\"JHipster website\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            className=\"logo-img\"\n          >\n            <img className=\"jhi-logo\" src={logo} alt=\"JHipster logo\" />\n          </a>\n          <a\n            className=\"logo link\"\n            onClick={toggleSidebar(\"about\")}\n            title=\"About JDL-Studio\"\n          >\n            JDL-Studio\n          </a>\n        </div>\n        {isStorageReadOnly ? (\n          <span className=\"storage-status\" ng-show=\"isStorageReadOnly\">\n            View mode, changes are not saved.\n            <a\n              // onClick=\"app.saveViewModeToStorage()\"\n              title=\"Save this diagram to localStorage\"\n              className=\"link\"\n            >\n              save\n            </a>\n            <a\n              // onClick=\"app.exitViewMode()\"\n              title=\"Discard this diagram\"\n              className=\"link\"\n            >\n              close\n            </a>\n          </span>\n        ) : null}\n        <div className=\"tools center\">\n          <a onClick={toggleLightMode} title=\"Toggle theme\" className=\"link\">\n            {isLightMode ? <LineIcon name=\"night\" /> : <LineIcon name=\"sun\" />}\n          </a>\n          <span className=\"seperator\">\n            <i>|</i>\n          </span>\n          <select className=\"template-select\" onChange={openTemplateDialog}>\n            <option value=\"\">&lt;Select template&gt;</option>\n            {JDLtemplates.map((it) => (\n              <option value={it.key} key={it.key}>\n                {it.key}\n              </option>\n            ))}\n          </select>\n          <a\n            onClick={toggleRanker}\n            title={`Cycle graph ranker strategy [current: ${ranker}]`}\n            className=\"link\"\n          >\n            {ranker === \"longest-path\" ? (\n              <LineIcon name=\"bricks\" />\n            ) : (\n              <LineIcon name=\"grid-alt\" />\n            )}\n          </a>\n          <a\n            onClick={toggleDirection}\n            title={`Cycle graph direction [current: ${direction}]`}\n            className=\"link\"\n          >\n            {direction === \"down\" ? (\n              <LineIcon name=\"arrow-right\" />\n            ) : (\n              <LineIcon name=\"arrow-down\" />\n            )}\n          </a>\n        </div>\n        <div className=\"tools right\">\n          {jhOnline.insideJhOnline && !jhOnline.authenticated ? (\n            <a\n              id=\"signin\"\n              className=\"link special\"\n              onClick={goToJHipsterOnline}\n              title=\"Sign in\"\n            >\n              Please sign in for more features!\n            </a>\n          ) : null}\n          {!jhOnline.insideJhOnline ? (\n            <a\n              id=\"signin\"\n              className=\"special\"\n              href=\"https://start.jhipster.tech/jdl-studio/\"\n              title=\"Go to new JDL Studio with more features\"\n            >\n              Go to new JDL Studio\n            </a>\n          ) : null}\n          {jhOnline.authenticated ? (\n            <>\n              <a title=\"Logged in as\" className=\"special\">\n                {jhOnline.username}\n              </a>\n\n              <select\n                className=\"jdl-select\"\n                value={jhOnline.jdlId}\n                onChange={setJDL}\n              >\n                <option value=\"\">&lt;Create new JDL Model&gt;</option>\n                {jhOnline.jdls.map((jdl) => (\n                  <option value={jdl.id}>{jdl.name}</option>\n                ))}\n              </select>\n              {jhOnline.startLoadingFlag ? (\n                <a>\n                  <LineIcon name=\"sync\" />\n                </a>\n              ) : (\n                <a\n                  title=\"Save JDL\"\n                  className=\"link\"\n                  onClick={confirmCreateNewJdl}\n                >\n                  <LineIcon name=\"file-add\" />\n                </a>\n              )}\n              <a onClick={goToManageJdls} className=\"link\" title=\"Manage JDLs\">\n                <LineIcon name=\"cog\" />\n              </a>\n            </>\n          ) : null}\n          {jhOnline.insideJhOnline ? (\n            <a\n              className=\"link\"\n              onClick={goToJHipsterOnline}\n              title=\"Go to the main JHipster Online page\"\n            >\n              <LineIcon name=\"home\" />\n            </a>\n          ) : null}\n\n          <span className=\"seperator\">\n            <i>|</i>\n          </span>\n          <a\n            id=\"savebutton\"\n            download=\"app-jdl.png\"\n            className=\"link\"\n            title=\"Download snapshot of this diagram\"\n            onClick={downloadImage}\n          >\n            <LineIcon name=\"camera\" />\n          </a>\n          <a\n            id=\"saveTextbutton\"\n            download=\"app.jdl\"\n            title=\"Download this JDL source\"\n            className=\"link\"\n            onClick={downloadJDL}\n          >\n            <LineIcon name=\"download\" />\n          </a>\n          <a\n            id=\"uploadbutton\"\n            className=\"upload-dialog link\"\n            title=\"Import text file of a JDL\"\n            onClick={openUploadDialog}\n          >\n            <LineIcon name=\"upload\" />\n          </a>\n          <a\n            onClick={toggleSidebar(\"about\")}\n            title=\"About JDL-Studio\"\n            className=\"link\"\n          >\n            <LineIcon name=\"question-circle\" />\n          </a>\n          <a\n            onClick={toggleSidebar(\"reference\")}\n            title=\"Language reference\"\n            className=\"link\"\n          >\n            <LineIcon name=\"book\" />\n          </a>\n          <span className=\"tooltip\"></span>\n        </div>\n      </header>\n      <UploadPopup\n        open={uploadPopup}\n        closeModal={closeUploadDialog}\n        setCode={setCode}\n        className={`${isLightMode ? \"light-theme\" : \"dark-theme\"}`}\n      />\n      <ResetPopup\n        open={templatePopup}\n        closeModal={closeTemplateDialog}\n        discard={loadTemplate}\n        className={`${isLightMode ? \"light-theme\" : \"dark-theme\"}`}\n      />\n      <WarningPopup\n        open={!jhOnline.insideJhOnline}\n        className={`${isLightMode ? \"light-theme\" : \"dark-theme\"}`}\n      />\n    </>\n  );\n}\n\nconst mapStateToProps = ({ studio, jhOnline }: IRootState) => ({\n  code: studio.code,\n  isStorageReadOnly: studio.isStorageReadOnly,\n  jhOnline: jhOnline,\n  isLightMode: studio.isLightMode,\n  ranker: studio.ranker,\n  direction: studio.direction,\n});\n\nconst mapDispatchToProps = {\n  setJDL,\n  setSidebar,\n  setCode,\n  toggleLightMode,\n  toggleRanker,\n  toggleDirection,\n};\n\ntype StateProps = ReturnType<typeof mapStateToProps>;\ntype DispatchProps = typeof mapDispatchToProps;\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Header);\n","import CodeMirror from \"codemirror\";\n\nvar WORD = /[\\w$]+/,\n  RANGE = 500;\n\nCodeMirror.registerHelper(\"hint\", \"anyword\", function (editor, options) {\n  const word = (options && options.word) || WORD;\n  const range = (options && options.range) || RANGE;\n  const cur = editor.getCursor();\n  const curLine = editor.getLine(cur.line);\n  const end = cur.ch;\n  let start = end;\n  while (start && word.test(curLine.charAt(start - 1))) --start;\n  const curWord = start !== end && curLine.slice(start, end);\n\n  const list = [] as any[];\n  const seen = {};\n  const re = new RegExp(word.source, \"g\");\n  for (var dir = -1; dir <= 1; dir += 2) {\n    var line = cur.line,\n      endLine =\n        Math.min(\n          Math.max(line + dir * range, editor.firstLine()),\n          editor.lastLine()\n        ) + dir;\n    for (; line !== endLine; line += dir) {\n      const text = editor.getLine(line);\n      let m;\n      while ((m = re.exec(text))) {\n        if (line === cur.line && m[0] === curWord) continue;\n        if (\n          (!curWord || m[0].lastIndexOf(curWord, 0) === 0) &&\n          !Object.prototype.hasOwnProperty.call(seen, m[0])\n        ) {\n          seen[m[0]] = true;\n          list.push(m[0]);\n        }\n      }\n    }\n  }\n  if (options && options.list) {\n    options.list.forEach(function (item) {\n      if (\n        (!curWord || item.toLowerCase().startsWith(curWord.toLowerCase())) &&\n        list.indexOf(item) === -1\n      )\n        list.push(item);\n    });\n  }\n  return {\n    list: list,\n    from: CodeMirror.Pos(cur.line, start),\n    to: CodeMirror.Pos(cur.line, end),\n  };\n});\n","import CodeMirror from \"codemirror\";\n\nconst constructs = [\n  `application {\n  config {\n\n  }\n}`,\n  `entity <name> {\n\n}`,\n  `enum <name> {\n\n}`,\n  `relationship OneToMany {\n\n}`,\n  `relationship ManyToMany {\n\n}`,\n  `relationship ManyToOne {\n\n}`,\n  `relationship OneToOne {\n\n}`,\n];\nconst mainKeywords = [\n  \"application\",\n  \"deployment\",\n  \"entity\",\n  \"enum\",\n  \"relationship\",\n  \"paginate\",\n  \"dto\",\n  \"service\",\n  \"skipClient\",\n  \"skipServer\",\n  \"search\",\n  \"angularSuffix\",\n  \"filter\",\n];\nconst relationshipKws = [\"OneToOne\", \"OneToMany\", \"ManyToOne\", \"ManyToMany\"];\nconst appInnerKws = [\"config\", \"entities\"];\nconst validationKws = [\n  \"required\",\n  \"minlength\",\n  \"maxlength\",\n  \"min\",\n  \"max\",\n  \"minbytes\",\n  \"maxbytes\",\n  \"pattern\",\n  \"unique\",\n];\nconst generalKws = [\"with\", \"all\", \"except\", \"to\"];\nconst paginationKws = [\"pagination\", \"pager\", \"infinite-scroll\"];\nconst dtoKws = [\"mapstruct\"];\nconst serviceKws = [\"serviceClass\", \"serviceImpl\"];\nconst searchKws = [\"ElasticSearch\"];\nconst apptypeKws = [\n  \"microservice\",\n  \"gateway\",\n  \"monolith\",\n  \"uaa\",\n  \"reactive\",\n  \"reactive-micro\",\n];\nconst typeKws = [\n  \"String\",\n  \"Integer\",\n  \"Long\",\n  \"BigDecimal\",\n  \"Float\",\n  \"Double\",\n  \"Boolean\",\n  \"LocalDate\",\n  \"ZonedDateTime\",\n  \"Instant\",\n  \"Blob\",\n  \"AnyBlob\",\n  \"ImageBlob\",\n];\nconst appKeysKws = [\n  \"baseName\",\n  \"applicationType\",\n  \"authenticationType\",\n  \"buildTool\",\n  \"cacheProvider\",\n  \"clientFramework\",\n  \"clientPackageManager\",\n  \"databaseType\",\n  \"devDatabaseType\",\n  \"enableHibernateCache\",\n  \"enableSwaggerCodegen\",\n  \"enableTranslation\",\n  \"jhiPrefix\",\n  \"languages\",\n  \"messageBroker\",\n  \"nativeLanguage\",\n  \"packageName\",\n  \"prodDatabaseType\",\n  \"searchEngine\",\n  \"serviceDiscoveryType\",\n  \"skipClient\",\n  \"skipServer\",\n  \"serverPort\",\n  \"skipUserManagement\",\n  \"testFrameworks\",\n  \"uaaBaseName\",\n  \"useSass\",\n  \"clientTheme\",\n  \"websocket\",\n];\nconst deploymentKeysKws = [\n  \"deploymentType\",\n  \"gatewayType\",\n  \"monitoring\",\n  \"directoryPath\",\n  \"appsFolders\",\n  \"clusteredDbApps\",\n  \"consoleOptions\",\n  \"serviceDiscoveryType\",\n  \"dockerRepositoryName\",\n  \"dockerPushCommand\",\n  \"kubernetesNamespace\",\n  \"kubernetesServiceType\",\n  \"ingressDomain\",\n  \"istio\",\n  \"istioRoute\",\n  \"enableRancherLoadBalancing\",\n  \"openshiftNamespace\",\n  \"storageType\",\n];\nconst specialValueKws = [\n  \"en\",\n  \"no\",\n  \"true\",\n  \"sql\",\n  \"mongodb\",\n  \"couchbase\",\n  \"cassandra\",\n  \"h2Disk\",\n  \"h2Memory\",\n  \"mysql\",\n  \"mariadb\",\n  \"postgresql\",\n  \"oracle\",\n  \"mssql\",\n  \"gatling\",\n  \"cucumber\",\n  \"protractor\",\n  \"angularX\",\n  \"react\",\n  \"eureka\",\n  \"consul\",\n  \"jwt\",\n  \"oauth2\",\n  \"session\",\n  \"ehcache\",\n  \"hazelcast\",\n  \"infinispan\",\n  \"memcached\",\n  \"maven\",\n  \"gradle\",\n  \"docker-compose\",\n  \"kubernetes\",\n  \"openshift\",\n  \"rancher-compose\",\n  \"zuul\",\n  \"traefik\",\n  \"prometheus\",\n  \"elk\",\n  \"curator\",\n  \"zipkin\",\n  \"LoadBalancer\",\n  \"NodePort\",\n  \"Ingress\",\n  \"manualInjection\",\n  \"autoInjection\",\n  \"ephemeral\",\n  \"persistent\",\n  \"default\",\n];\n\nCodeMirror.defineMode(\"jdl\", function () {\n  const words = {};\n  function define(style, list) {\n    for (let i = 0; i < list.length; i++) {\n      words[list[i]] = style;\n    }\n  }\n\n  // relationships\n  define(\"relationship\", relationshipKws);\n  // App inner keywords\n  define(\"relationship\", appInnerKws);\n\n  // Keywords\n  define(\"keyword\", mainKeywords);\n\n  // types\n  define(\"attribute\", appKeysKws);\n  define(\"attribute\", deploymentKeysKws);\n  define(\"attribute\", typeKws);\n\n  // types\n  define(\"qualifier\", validationKws);\n\n  // app types\n  define(\"keyword\", apptypeKws);\n\n  // types\n  define(\"special\", generalKws.concat(\n    paginationKws,\n    serviceKws,\n    dtoKws,\n    searchKws,\n    specialValueKws\n  ));\n\n  function tokenBase(stream, state) {\n    if (stream.eatSpace()) return null;\n\n    let sol = stream.sol();\n    let ch = stream.next();\n    let delimiters = \"{ } |\".split(\" \");\n\n    if (ch === \"\\\\\") {\n      stream.next();\n      return null;\n    }\n\n    if (sol && ch === \"#\") {\n      stream.skipToEnd();\n      return \"meta\"; // 'directives'\n    }\n\n    let lastCh = stream.string.charAt(stream.start - 1);\n    let startCh = stream.string.trim().charAt(0);\n    if (\n      stream.match(\"//\") ||\n      ch === \"/\" ||\n      lastCh + ch === \"/*\" ||\n      startCh === \"*\"\n    ) {\n      stream.skipToEnd();\n      return \"comment\";\n    }\n\n    if (ch === \"+\" || ch === \"=\") {\n      return \"operator\";\n    }\n    if (ch === \"-\") {\n      stream.eat(\"-\");\n      stream.eatWhile(/\\w/);\n      return \"attribute\";\n    }\n    if (\n      delimiters.some(function (c) {\n        return stream.eat(c);\n      })\n    )\n      return \"bracket\";\n\n    stream.eatWhile(/[\\w-]/);\n    let cur = stream.current();\n    if (stream.peek() === \"=\" && /\\w+/.test(cur)) return \"def\";\n    if (words.hasOwnProperty(cur)) return words[cur];\n\n    if (\n      /[A-Z*]/.test(ch) ||\n      (lastCh !== \"/\" && ch === \"*\") ||\n      (lastCh === \"*\" && ch !== \"/\")\n    ) {\n      stream.eatWhile(/[a-z_]/);\n      if (stream.eol() || !/\\s[{,]/.test(stream.peek())) {\n        return \"def\";\n      }\n    }\n\n    return null;\n  }\n\n  function tokenize(stream, state) {\n    return (state.tokens[0] || tokenBase)(stream, state);\n  }\n\n  return {\n    startState: function () {\n      return { tokens: [] };\n    },\n    token: function (stream, state) {\n      return tokenize(stream, state);\n    },\n    lineComment: \"//\",\n    fold: \"brace\",\n  };\n});\nconst keywords = mainKeywords.concat(\n  constructs,\n  typeKws,\n  relationshipKws,\n  validationKws,\n  generalKws,\n  paginationKws,\n  dtoKws,\n  serviceKws,\n  apptypeKws,\n  appKeysKws,\n  deploymentKeysKws,\n  specialValueKws\n);\n// @ts-ignore\nCodeMirror.commands.autocomplete = function (cm) {\n  // @ts-ignore\n  cm.showHint({ hint: CodeMirror.hint.anyword, list: keywords });\n};\n","import { parse } from \"jhipster-core/lib/dsl/api\";\n\nfunction validJDL(line) {\n  var ok = line[0] !== \"#\";\n  return ok ? line.replace(/\\/\\/[^\\n\\r]*/gm, \"\") : \"\";\n}\nfunction isDirective(line) {\n  return line.text[0] === \"#\";\n}\n\nenum NomlEntityTypes {\n  package,\n  entity,\n  enum,\n  relation,\n  field,\n}\nexport type NomlEntity = {\n  name: string;\n  type: NomlEntityTypes;\n  renderType: string;\n  description?: string;\n  children?: NomlEntity[];\n};\n\nexport function jdlToNoml(jdlString: string): string {\n  const lines = jdlString\n    .split(\"\\n\")\n    .map((s, i) => ({ text: s.trim(), index: i }));\n  const pureDirectives = lines\n    .filter(isDirective)\n    .map((it) => it.text)\n    .join(\"\\n\")\n    .trim();\n\n  const pureDiagramCode = lines\n    .map((it) => it.text)\n    .map(validJDL)\n    .join(\"\\n\")\n    .trim();\n\n  const JDL = parse(pureDiagramCode);\n  let nomlEntities: NomlEntity[] = [];\n  const allEntityNames = JDL.entities.map((it) => it.name);\n  let unProcessedEntities: string[] = [...allEntityNames];\n  if (JDL.applications.length > 0) {\n    // draw entities within apps\n    nomlEntities = JDL.applications.map((app) => {\n      const appLabel = `${app.config.baseName} (${app.config.applicationType})`;\n      const [children, unProcessed] = processEntities(\n        JDL,\n        unProcessedEntities,\n        findActualEntities(\n          app.entities.entityList,\n          app.entities.excluded,\n          JDL.options.microservice,\n          app.config.baseName,\n          allEntityNames\n        )\n      );\n      unProcessedEntities = unProcessed;\n      return {\n        name: appLabel,\n        type: NomlEntityTypes.package,\n        renderType: \"<package>\",\n        description: `${\n          app.config.clientFramework\n            ? `Client: ${app.config.clientFramework}, `\n            : \"\"\n        }Auth: ${app.config.authenticationType}, DB: ${\n          app.config.prodDatabaseType\n        }`,\n        children,\n      };\n    });\n  }\n  if (unProcessedEntities.length > 0) {\n    const [processed] = processEntities(\n      JDL,\n      unProcessedEntities,\n      unProcessedEntities\n    );\n    // parse remaining entities\n    nomlEntities = [...nomlEntities, ...processed];\n  }\n  // convert to noml format\n  const nomlText = nomlEntities.map(mapToNoml);\n  return `${pureDirectives}\\n${nomlText.join(\"\\n\")}\\n`;\n}\n\nfunction processEntities(\n  JDL,\n  unProcessed,\n  filter: string[] = []\n): [NomlEntity[], string[]] {\n  const out: NomlEntity[] = [];\n  const allEnumNames = JDL.enums.map((it) => it.name);\n  const enumsInApp: string[] = [];\n  JDL.entities.forEach((entity) => {\n    if (filter.length > 0 && !filter.includes(entity.name)) {\n      return;\n    }\n    out.push({\n      name: entity.name,\n      type: NomlEntityTypes.entity,\n      renderType: \"\",\n      children: entity.body.map((field) => {\n        if (allEnumNames.includes(field.type)) {\n          enumsInApp.push(field.type);\n          out.push({\n            name: `[${entity.name}] --> [${field.type}]`,\n            type: NomlEntityTypes.relation,\n            renderType: \"\",\n          });\n        }\n        return {\n          name: `${field.name} : ${field.type}${\n            field.validations.filter((it) => it.key === \"required\").length === 1\n              ? \"*\"\n              : \"\"\n          }`,\n          type: NomlEntityTypes.field,\n          renderType: \"\",\n        };\n      }),\n    });\n    unProcessed = unProcessed.filter((it) => it !== entity.name);\n  });\n  JDL.enums.forEach((en) => {\n    if (!enumsInApp.includes(en.name)) {\n      return;\n    }\n    out.push({\n      name: `${en.name}`,\n      type: NomlEntityTypes.enum,\n      renderType: \"<reference>\",\n      description: \"<<enum>>\",\n      children: en.values.map((val) => ({\n        name: `${val.key}`,\n        type: NomlEntityTypes.field,\n        renderType: \"\",\n      })),\n    });\n  });\n  JDL.relationships.forEach((rel) => {\n    if (\n      filter.length > 0 &&\n      (![...filter, \"User\"].includes(rel.from.name) ||\n        ![...filter, \"User\"].includes(rel.to.name))\n    ) {\n      return;\n    }\n    out.push({\n      name: `[${rel.from.name}] ${getCardinality(rel.cardinality)} [${\n        rel.to.name\n      }]`,\n      type: NomlEntityTypes.relation,\n      renderType: \"\",\n    });\n  });\n\n  return [out, unProcessed];\n}\n\ntype MsOption = { list: string[] };\n\nfunction findActualEntities(\n  included: string[],\n  excluded: string[],\n  msOptions: { [key: string]: MsOption },\n  appName: string,\n  entities: string[]\n): string[] {\n  let include = included;\n  if (include.includes(\"*\")) {\n    include = [...include, ...entities];\n    if (msOptions) {\n      Object.entries(msOptions).forEach(([key, val]) => {\n        if (key !== appName) {\n          include = include.filter((it) => !val.list.includes(it));\n        }\n      });\n    }\n  }\n  if (excluded.length !== 0) {\n    include = include.filter((it) => !excluded.includes(it));\n  }\n  return include;\n}\n\nfunction mapToNoml(it: NomlEntity) {\n  switch (it.type) {\n    case NomlEntityTypes.field:\n    case NomlEntityTypes.relation:\n      return `${it.name}\\n`;\n    default:\n      return `[${it.renderType}${it.name}|${\n        it.description ? `${it.description}|` : \"\"\n      }\\n${it.children?.map(mapToNoml).join(\"\\n\")}\\n]`;\n  }\n}\n\nfunction getCardinality(cardinality) {\n  switch (cardinality) {\n    case \"one-to-many\":\n    case \"OneToMany\":\n      return \"(1..*) -o\";\n    case \"OneToOne\":\n    case \"one-to-one\":\n      return \"(1..1) -\";\n    case \"ManyToOne\":\n    case \"many-to-one\":\n      return \"(*..1) o-\";\n    case \"ManyToMany\":\n    case \"many-to-many\":\n      return \"(*..*) o-o\";\n    default:\n      return \"(1..*) ->\";\n  }\n}\n","import nomnoml from \"nomnoml\";\n\nexport interface Vec {\n  x: number;\n  y: number;\n}\n\nexport type Throttler = (\n  func: (arg: any) => void,\n  timespan: number,\n  opts?: any\n) => (arg: any) => void;\n\nexport class CanvasPanner {\n  offset: Vec = { x: 0, y: 0 };\n\n  zoomLevel: number = 0;\n\n  constructor(\n    element: HTMLElement,\n    private onChange: () => void,\n    throttle: Throttler\n  ) {\n    var mouseDownPoint: Vec | boolean = false;\n    function isVec(value: Vec | boolean): value is Vec {\n      return value !== false;\n    }\n\n    var mouseMove = (e: MouseEvent) => {\n      if (isVec(mouseDownPoint)) {\n        this.offset = nomnoml.skanaar.vector.diff(\n          { x: e.pageX, y: e.pageY },\n          mouseDownPoint\n        );\n        onChange();\n      }\n    };\n\n    var mouseUp = () => {\n      mouseDownPoint = false;\n      element.style.width = \"40%\";\n    };\n\n    var magnify = (e: MouseWheelEvent) => {\n      this.zoomLevel = Math.min(10, this.zoomLevel - (e.deltaY < 0 ? -1 : 1));\n      onChange();\n    };\n\n    var mouseDown = (e: MouseEvent) => {\n      element.style.width = \"100%\";\n      mouseDownPoint = nomnoml.skanaar.vector.diff(\n        { x: e.pageX, y: e.pageY },\n        this.offset\n      );\n    };\n\n    element.addEventListener(\"mousedown\", mouseDown);\n    element.addEventListener(\"mouseup\", mouseUp);\n    element.addEventListener(\"mouseleave\", mouseUp);\n    element.addEventListener(\"wheel\", throttle(magnify, 50), { passive: true });\n    element.addEventListener(\"mousemove\", throttle(mouseMove, 50), {\n      passive: true,\n    });\n  }\n\n  positionCanvas(element: HTMLCanvasElement) {\n    var viewport = window;\n    var w = element.width / this.superSampling;\n    var h = element.height / this.superSampling;\n    element.style.top =\n      300 * (1 - h / viewport.innerHeight) + this.offset.y + \"px\";\n    element.style.left =\n      150 + (viewport.innerWidth - w) / 2 + this.offset.x + \"px\";\n    element.style.width = w + \"px\";\n    element.style.height = h + \"px\";\n  }\n\n  superSampling = window.devicePixelRatio || 1;\n\n  zoom(): number {\n    return this.superSampling * Math.exp(this.zoomLevel / 10);\n  }\n\n  magnify(diff: number) {\n    this.zoomLevel = Math.min(10, this.zoomLevel + diff);\n    this.onChange();\n  }\n\n  reset() {\n    this.zoomLevel = 1;\n    this.offset = { x: 0, y: 0 };\n    this.onChange();\n  }\n}\n","/* eslint-disable jsx-a11y/anchor-is-valid */\nimport React from \"react\";\nimport LineIcon from \"react-lineicons\";\n\nexport const CanvasTools = ({ classToggler, panner }) => {\n  const zoomIn = () => {\n    panner.magnify(2);\n  };\n\n  const zoomOut = () => {\n    panner.magnify(-2);\n  };\n\n  const reset = () => {\n    panner.reset();\n  };\n  return (\n    <div\n      className=\"canvas-tools\"\n      id=\"canvas-tools\"\n      onMouseEnter={classToggler(true)}\n      onMouseLeave={classToggler(false)}\n    >\n      <a onClick={zoomIn} title=\"Zoom in\" className=\"link\">\n        <LineIcon name=\"zoom-in\" />\n      </a>\n      <a onClick={reset} title=\"Reset viewport\" className=\"link\">\n        <LineIcon name=\"frame-expand\" />\n      </a>\n      <a onClick={zoomOut} title=\"Zoom out\" className=\"link\">\n        <LineIcon name=\"zoom-out\" />\n      </a>\n    </div>\n  );\n};\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport throttle from \"lodash.throttle\";\n\n// nomnoml dependencies\nimport nomnoml from \"nomnoml\";\n// code mirror dependencies\nimport { Controlled as CodeMirror } from \"react-codemirror2\";\nimport \"codemirror/lib/codemirror.css\";\nimport \"codemirror/keymap/sublime\";\nimport \"codemirror/addon/edit/matchbrackets\";\nimport \"codemirror/addon/edit/closebrackets\";\nimport \"codemirror/addon/dialog/dialog\";\nimport \"codemirror/addon/search/searchcursor\";\nimport \"codemirror/addon/hint/show-hint\";\n// customizations for JDL\nimport \"../../codemirror/JDLHint\";\nimport \"../../codemirror/CodemirrorJDLMode\";\nimport \"../../codemirror/solarized.jdl.scss\";\nimport \"../../codemirror/show-hint-jdl.css\";\n\nimport { CanvasPanner } from \"./CanvasPanner\";\nimport { jdlToNoml } from \"./JDLToNoml\";\nimport { IRootState } from \"../../Store\";\nimport {\n  setCode,\n  setError,\n  setDefaultError,\n  reloadStorage,\n  setCanvasMode,\n} from \"./StudioReducer\";\nimport { CanvasTools } from \"./CanvasTools\";\nimport { saveAs, setFilename } from \"../Utils\";\n\n// this cannot have any space before the directives\nconst NOMNOML_STYLE_DARK = `\n#stroke: #aaaaaa\n#fill: #21252b;#002b36;\n\\n`;\nconst NOMNOML_STYLE = `\n#arrowSize: 0.5\n#lineWidth: 2\n#spacing: 40\n#title: jhipster-jdl\n#zoom: 0.8\n\\n`;\n\nexport interface IStudioProp extends StateProps, DispatchProps {}\n\nexport class Studio extends React.PureComponent<IStudioProp> {\n  // codemirror configuration\n  private cmOptions = {\n    lineNumbers: true,\n    mode: \"jdl\",\n    matchBrackets: true,\n    autoCloseBrackets: true,\n    keyMap: \"sublime\",\n    extraKeys: {\n      \"Ctrl-Space\": \"autocomplete\",\n    },\n  };\n  private panner;\n  private editorRef = React.createRef<any>();\n  private canvasRef = React.createRef<HTMLCanvasElement>();\n  private canvasPannerRef = React.createRef<HTMLDivElement>();\n\n  componentDidMount() {\n    window.addEventListener(\"hashchange\", this.props.reloadStorage);\n    window.addEventListener(\n      \"resize\",\n      throttle(() => this.renderJDL(), 750, { leading: true })\n    );\n    window.addEventListener(\"keydown\", saveAs);\n    if (this.canvasPannerRef.current) {\n      this.panner = new CanvasPanner(\n        this.canvasPannerRef.current,\n        () => this.renderJDL(),\n        throttle\n      );\n    }\n    this.updateCode();\n  }\n\n  componentDidUpdate(prevProps: IStudioProp) {\n    if (\n      prevProps.isLightMode !== this.props.isLightMode ||\n      prevProps.direction !== this.props.direction ||\n      prevProps.ranker !== this.props.ranker\n    ) {\n      this.renderJDL();\n    }\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"hashchange\", this.props.reloadStorage);\n    window.removeEventListener(\"keydown\", saveAs);\n  }\n\n  getDefaultDirectives = ({ isLightMode, ranker, direction }) => {\n    let style = isLightMode\n      ? NOMNOML_STYLE\n      : NOMNOML_STYLE_DARK + NOMNOML_STYLE;\n    style += `#ranker: ${ranker}\\n#direction: ${direction}\\n`;\n    return style;\n  };\n\n  renderJDL = (val = this.props.code) => {\n    try {\n      const canvas = this.canvasRef.current;\n      const nomlVal = val ? jdlToNoml(val) : \"[No JDL content, start writing]\";\n      const finalVal = this.getDefaultDirectives(this.props) + nomlVal;\n      const model = nomnoml.draw(canvas, finalVal, this.panner.zoom());\n      setFilename(model.config.title);\n      this.panner.positionCanvas(canvas);\n    } catch (e) {\n      console.log(e);\n      this.handleError(e);\n    }\n  };\n\n  updateCode = (val = this.props.code) => {\n    this.props.setDefaultError();\n    this.renderJDL(val);\n    this.props.setCode(val);\n  };\n\n  handleError = (e) => {\n    var msg = \"\",\n      top = 0;\n    if (e.message && this.editorRef.current) {\n      const lineHeight = parseFloat(\n        window\n          .getComputedStyle(this.editorRef.current.editor.getWrapperElement())\n          .getPropertyValue(\"line-height\")\n      );\n      top = 40 + lineHeight * this.findLine(e.message);\n      msg = e.message;\n    } else {\n      msg = \"An error occurred, look at the console\";\n    }\n    this.props.setError({\n      lineMarkerTop: top,\n      hasError: true,\n      errorTooltip: msg,\n    });\n  };\n\n  findLine = (msg): number => {\n    var regex = /at line: ([0-9]+),/g;\n    var match = regex.exec(msg);\n    return match && match[1] ? parseInt(match[1]) : 0;\n  };\n\n  classToggler = (state) => () => {\n    this.props.setCanvasMode(state);\n  };\n\n  getClassNames = (isLightMode, isCanvasMode) =>\n    `${isLightMode ? \"light-theme\" : \"dark-theme\"} ${\n      isCanvasMode ? \"canvas-mode\" : \"\"\n    }`;\n\n  editorBeforeChange = (editor, data, val) => this.props.setCode(val);\n  editorOnChange = (editor, data, val) => this.updateCode(val);\n\n  render() {\n    const { isCanvasMode, code, error, isLightMode } = this.props;\n    return (\n      <div\n        className={`studio ${this.getClassNames(isLightMode, isCanvasMode)}`}\n      >\n        {/* <!-- editor line number, error markers --> */}\n        <div className={`line-numbers ${error.hasError ? \"error\" : \"\"}`}></div>\n        <div className=\"line-marker\" style={{ top: error.lineMarkerTop }}></div>\n        {/* <!-- code mirror editor --> */}\n        <CodeMirror\n          ref={this.editorRef}\n          className=\"code-mirror-editor\"\n          value={code}\n          onBeforeChange={this.editorBeforeChange}\n          onChange={this.editorOnChange}\n          options={{\n            ...this.cmOptions,\n            theme: `solarized ${isLightMode ? \"light\" : \"dark\"}`,\n          }}\n        />\n        {/* <!-- canvas holding the UML diagram --> */}\n        <canvas id=\"canvas\" ref={this.canvasRef}></canvas>\n        {/* <!-- shows a tooltip on error --> */}\n        <span className=\"error-tooltip\">{error.errorTooltip}</span>\n        {/* <!-- canvas tools and pan/zoom handler --> */}\n        <CanvasTools panner={this.panner} classToggler={this.classToggler} />\n        <div\n          className=\"canvas-panner\"\n          ref={this.canvasPannerRef}\n          onMouseEnter={this.classToggler(true)}\n          onMouseLeave={this.classToggler(false)}\n        ></div>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = ({ studio }: IRootState) => ({\n  code: studio.code,\n  error: studio.error,\n  isCanvasMode: studio.isCanvasMode,\n  isLightMode: studio.isLightMode,\n  ranker: studio.ranker,\n  direction: studio.direction,\n});\n\nconst mapDispatchToProps = {\n  setCode,\n  setError,\n  setDefaultError,\n  reloadStorage,\n  setCanvasMode,\n};\n\ntype StateProps = ReturnType<typeof mapStateToProps>;\ntype DispatchProps = typeof mapDispatchToProps;\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Studio);\n","import React from \"react\";\nimport Sidebar from \"./components/sidebar/Sidebar\";\nimport Header from \"./components/Header\";\nimport Studio from \"./components/studio/Studio\";\nimport \"./App.scss\";\n\nfunction App() {\n  return (\n    <div className=\"wrap app\">\n      <Header />\n      {/* <!-- Code and image --> */}\n      <Studio />\n      {/* <!-- sidebar --> */}\n      <Sidebar />\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Provider } from \"react-redux\";\n\nimport { store } from \"./Store\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport \"./index.scss\";\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}